<head>
  <meta charset="UTF-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta http-equiv="X-Frame-Options" content="sameorigin">
  {{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}
  {{ with .Site.Params.description }}<meta name="description" content="{{ . }}">{{ end }}

  <title>
    {{ .Title }}{{ if not .IsHome }} &middot; {{ .Site.Title }}{{end}}
  </title>

  <link rel="canonical" href="{{ .Permalink }}">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/images/favicon.ico">

  {{ if .RSSlink }}
    <link href="/atom.xml" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
    <link href="/atom.xml" rel="feed" type="application/rss+xml" title="{{ .Site.Title }}" />
  {{ end }}

  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
  <script src="js/toc.min.js"></script>
  {{ partial "analytics.html" . }}

  <!-- redirect from phil-opp.github.io/blog_os -->
  <script type="text/javascript">
    if (window.location.hostname == "phil-opp.github.io") {
      window.location.href = "http://os.phil-opp.com/";
    }

    window.onload = function() {
      var container = document.querySelector('#toc');

      var selector = "h2";
      if (container.className.split(" ").indexOf("coarse") == -1) {
        selector += ",h3";
      }

      var toc = initTOC({
          selector: selector,
          scope: '.post',
          overwrite: false,
          prefix: 'toc'
      });

      var heading = document.createElement("H2");
      var heading_text = document.createTextNode("Table of Contents");
      heading.appendChild(heading_text);

      container.appendChild(heading);
      container.appendChild(toc);
    }
  </script>
</head>
